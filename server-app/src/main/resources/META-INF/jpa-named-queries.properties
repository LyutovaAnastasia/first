AcademyEntity.getAcademy=select a.id, a.name, a.link_tag, a.icon_tag, (select array_to_string(array_agg(cl.id), ',', '*') from server.classes cl where a.id = cl.academy_id) classes, (select array_to_string(array_agg(server_categories.id), ',', '*') from server.academies as sa left join server.categories_academies ca on sa.id = ca.academies_id left join server.categories server_categories on server_categories.id = ca.categories_id where sa.id = a.id group by sa.id ) as                                                                                                   categories from server.academies a where a.id = :academyId
